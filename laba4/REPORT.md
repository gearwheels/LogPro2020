#№ Отчет по лабораторной работе №4
## по курсу "Логическое программирование"

## Обработка естественного языка

### студент: Тимофеев А.В.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|              |       ?       |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*

Добавить описание грамматики, реализовать разбор по грамматике (из строки получить выражение).


## Введение

Естественный язык – очень сложная система с неочевидной и гибкой структурой. Любой анализ естественного языка сводиться к нескольким этапам: предварительный анализ (поиск границ слов и предложений), морфологический анализ (установление словарных форм слов и приписывание им морфологических признаков), синтаксический анализ (зависимости между словами), семантический анализ (смысл предложения или отдельных слов). Грамматика описывает закономерности устройства языка, но она имеет описательный характер и, к сожалению, не всегда содержит явные и чёткие правила формирования предложений. 

Для искусственного языка (коем можно считать математические выражения) характерна строгая структура и конкретные правила синтаксиса, семантики и пр. Это делает обработку подобных языков проще. Также явные правила по которым образуется выражение проще задать прологу, или перестроить под него.


## Задание

4. Реализовать синтаксический анализатор арифметического выражения для перевода его в префиксную форму. В выражении допустимы операции +,-,*,/.

## Принцип решения

Решение основано на рекурсивной перестановке элементов в списке. Сначала перестановка происходит в операциях с более высоким приоритетом, затем перестроенный список передается дальше. Предикат transform считывает список, далее он реверсируется и передается предикату a_expr, где происходит синтаксический разбор данного списка.

Список по возможности разделяется на две части относительно знака сложения (или вычитания) и в  предикате a_term начинается разбор относительно операции умножения (или деления) сначала левой части, а потом правой, далее предикат myAppend формирует вывод в виде строки.

## Результаты

```prolog
transform(Inf,Pref):-reverse(Inf,Inf1),a_expr(Inf1,Pref).

a_number([NS],NS):-number(NS).

myAppend([], L, [L]):- number(L),!.
myAppend(Y, L, [Y,L]):-number(Y),number(L),!.
myAppend(Y, L, [Y|L]):-number(Y),not(number(L)),!.
myAppend([], L, L):- not(number(L)).
myAppend([X | L1], L2, [X | L3]):-myAppend(L1, L2, L3).

a_term(T,V):- a_number(T,V).
a_term(T,V):-append(X,['*'|Y],T),a_number(X,Vx), a_term(Y,Vy),myAppend(Vy, Vx, V1),myAppend(['*'], V1, V).
a_term(T,V):-append(X,['/'|Y],T),a_number(X,Vx), a_term(Y,Vy),myAppend(Vy, Vx, V1),myAppend(['/'], V1, V).

a_expr(T,V):-a_term(T,V).
a_expr(T,V):-append(X,['+'|Y],T),a_term(X,Vx), a_expr(Y,Vy),myAppend(Vy, Vx, V1),myAppend(['+'], V1, V).
a_expr(T,V):-append(X,['-'|Y],T),a_term(X,Vx), a_expr(Y,Vy),myAppend(Vy, Vx, V1),myAppend(['-'], V1, V).


?- transform([7,+,9,*,7],Pref).
Pref = [+, 7, *, 9, 7] ;
false.

?- transform([7,/,7,+,9,*,7,+,8,*,4],Pref).             
Pref = [+, +, /, 7, 7, *, 9, 7, *|...] ;
false.

?- transform([7,/,7,+,9,*,7,+,8],Pref).
Pref = [+, +, /, 7, 7, *, 9, 7, 8] ;
false.

?- transform([7,'+',9,'*',7],Pref).
Pref = [+, 7, *, 9, 7] ;
false.

```

## Выводы

В данной лабораторной работе мною были изучены средства Пролога для реализации синтаксического анализатора. Анализировать математические выражения с точки зрения синтаксиса в прологе проще, чем работать с предложениями например на русском языке, из-за строгой типизации математических выражений. Поэтому у меня получилось довольно краткое решение моей задачи.