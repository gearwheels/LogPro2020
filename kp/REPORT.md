# Отчет по курсовому проекту
## по курсу "Логическое программирование"

### студент: Тимофеев А.В.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|              |               |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*
## Введение

В результате выполнения курсового проекта я получил следующие навыки и знания:

* во время написания реферата я разобрался с поколениями ЭВМ, ознакомился с основными компонентами и архитектурой каждого поколения ЭВМ, изучил опыт японских программистов и инженеров по созданию ЭВМ 5-го поколения, изучил опыт советских программистов и инженеров по созданию ЭВМ 5-го поколения, а также бегло ознакомился с информацией о фотонных компьютерах.

* Научился обрабатывать данные в формате GEDCOM.

* Написал парсер, обрабатывающий текстовые данные. Ознакомился с регулярными выражениями. Задачи обработки текста встречаются в любом приложении хоть как-то связанном с текстовыми данными, поэтому это, несомненно, универсальный и полезный навык.

* Закрепил навыки, полученные в 3 лабораторной работе,связанные с поиском в пространстве состояний. В КП это было необходимо для построения цепочки родства.

## Задание

 1. Создать родословное дерево своего рода на несколько поколений (3-4) назад в стандартном формате GEDCOM с использованием сервиса MyHeritage.com 
 2. Преобразовать файл в формате GEDCOM в набор утверждений на языке Prolog, используя следующее представление: child(ребенок, родитель), male(человек), female(человек).
 3. Реализовать предикат проверки/поиска золовки. 
 4. Реализовать программу на языке Prolog, которая позволит определять степень родства двух произвольных индивидуумов в дереве
 5. [На оценки хорошо и отлично] Реализовать естественно-языковый интерфейс к системе, позволяющий задавать вопросы относительно степеней родства, и получать осмысленные ответы. 

## Получение родословного дерева

Я зарегистрировался на сервисе MyHeritage.com, создал свое генеалогическое древо из 20 человека. Потом я экспортировал дерево из этого сервиса в формате GEDCOM.

## Конвертация родословного дерева

В условиях нехватки времени мне показалось нецелесообразным изучать новые для себя технологии и языки. Я был знаком с С/С++, Python и Bash. Так как я работаю на Win 10, Bash показался мне не лучшим выбором (хотя Bash в целом не очень удобный инструмент), с С/С++ я умел работать и знал, как неудобно там устроена работа со строками, поэтому выбор пал на Python. С ним я был знаком не очень хорошо, но я считаю, что этот язык является достаточно удобным и полезным инструментом в решении рутинных (и не только) задач, поэтому стоит с ним познакомиться получше.

В силу неглубоких знаний Python, я написал простую программу. Построчно проходя по файлу, мы находим id человека, его имя, фамилию и пол и добавляем эту информацию в контейнер list, далее еще раз открываем файл и считываем информацию о семье, и выводим в файл в виде предикатов собранную информацию.В программе используется модуль re, который дает возможность использовать, в данном случае, простые регулярные выражения.

## Предикат поиска родственника

Золовка это сестра мужа. Золовка может быть только у жены. Исходя из семейного кодекса РФ, мужем может быть только мужчина, а женой женщина, поэтому я проверяю пол переменной J, которая обозначает жену, переменная Z, обозначает золовку. Далее мы находим мужа, а затем его брата/сестру и с помощью предиката female выбираем сестру.

```prolog
zolovka(J,Z):-female(J),check(husband, Husband, J),sibling(Husband, Z),
    female(Z),!.

?- zolovka(J,'Elena Timofeev').
J = 'Svetlana Timofeeva'.

?- zolovka('Svetlana Timofeeva',Z).
Z = 'Elena Timofeev'.

?- zolovka('Nadezhda Timofeeva',Z).
Z = 'Ludmila Timofeev'.

?- zolovka('Ulyana Myakinkova',Z).
false.

?- zolovka(J,'Ludmila Timofeev').
J = 'Nadezhda Timofeeva'.
```

## Определение степени родства

Я использую поиск в ширину для того, чтобы найти кратчайшее отношение родства. Реализуем предикаты check, для определения прямых отношений между двумя людьми. Прямые -- то есть люди связаны на прямую, а не через какого-то человека. В итоге есть проверка отношений муж, жена, брат, сестра, отец, мать, сын, дочь, ребенок, родитель. Я не реализовал правила для получения дальних родственников, потому что при поиске программа могла перескочить через родственников, которые связаны на прямую. С помощью поиска находим цепочки родственников и переводим их в цепочку родственных связей получается ответ.

``` prolog

relationship(X, Y, Out):-searchBdth(X, Y, Out1), !,transform(Out1,[] ,Out).

transform([_],Tmp,Tmp). % переделевает цепочку родственников в цепочку родства
transform([First,Second|Tail],Tmp,OutList):-check(Relation,First,Second),add(Relation,Tmp,TmpOut),transform([Second|Tail],TmpOut,OutList),!.

prolong([X|T],[Y,X|T]):-move(X,Y), not(member(Y,[X|T])).

move(X,Y):-check(_,X,Y).

searchBdth(X,Y,P):-bdth([[X]],Y,L),reverse(L,P).
bdth([[X|T]|_],X,[X|T]).
bdth([P|QI],X,R):-findall(Z,prolong(P,Z),T),append(QI,T,Q0),bdth(Q0,X,R),!.
bdth([_|T],Y,L):-bdth(T,Y,L).

?- relationship('Maria Zaitseva', 'Alexey Timofeev', Out).
Out = [mother, mother, mother].%'Maria Zaitseva'мать матери матери 'Alexey Timofeev'

?- relationship('Alexey Timofeev','Maria Zaitseva', Out).
Out = [son, daughter, daughter].

?- relationship('Alexey Timofeev', 'Vladimir Timofeev', Out).
Out = [son].

?- relationship('Egor Timofeev', 'Ivan Zaitsev', Out).
Out = [father, husband, daughter, daughter].%'Egor Timofeev' отец мужа внучки 'Ivan Zaitsev'

?- relationship('Elena Timofeev', 'Ivan Zaitsev', Out).
Out = [sister, husband, daughter, daughter].

```
Еще можно задать наименование одного из простых родствеников и найти всех соответствующих ему людей в дереве.

```prolog
askRelationship(X, Y, Out):-relation(Out), !,check(Out, X, Y).

?- askRelationship(X, Y,mother).
X = 'Antonina Timofeeva',
Y = 'Anatoly Timofeev' ; 
X = 'Antonina Timofeeva',
Y = 'Ludmila Timofeev' ; 
X = 'Maria Zaitseva',    
Y = 'Nadezhda Timofeeva' ;
X = 'Praskovya Timofeeva',
Y = 'Egor Timofeev' ;     
X = 'Ulyana Myakinkova',
Y = 'Anna Timofeeva' ;  
X = 'Svetlana Timofeeva',
Y = 'Alexey Timofeev' ;  
X = 'Svetlana Timofeeva',
Y = 'Michael Timofeev' ; 
X = 'Nadezhda Timofeeva',
Y = 'Irina  Timofeeva' ; 
X = 'Nadezhda Timofeeva',
Y = 'Svetlana Timofeeva' ;
X = 'Anna Timofeeva',
Y = 'Anatoly Timofeev1' ;
X = 'Anna Timofeeva',
Y = 'Vladimir Timofeev' ;
X = 'Anna Timofeeva',
Y = 'Elena Timofeev'.

```

## Естественно-языковый интерфейс

## Выводы

Полученные навыки и знания я описал в начале отчета, поэтому здесь хотелось бы сказать о плюсах и минусах моей работы и о курсе в целом.

Большим минусом является то, что мне не хватило времени на последний пункт курсового проекта, так как это самый объемное и сложное задание из всего КП. Еще небольшой минус состоит в том, что поиск в ширину, который я использую для построения цепочки родства, имеет экспоненциальную сложность по памяти, поэтому если входные данные будут велики, то может произойти переполнение стека. 

Отдельно хочется отметить написание реферата. Источников в интернете оказалось не много, но и не мало. Проблема была в том, что в них была написана наиболее общая информация о японском проекте ЭВМ V поколения, и немного об остальных проектах, но мне удалось найти достаточно подробную статью о похожем проекте только в СССР. Мне было интересно разобраться в этой теме, так как меня интересовало, почему уже долгое время не происходит революционных преобразований в архитектуре компьютеров.

Данная работа показывает реальную задачу, при решении которой лучше всего использовать логический язык программирования. Это, несомненно, полезный опыт, нежели если бы мы реализовывали какие-то абстрактные предикаты, не имеющие никакого практического применения. Я думаю приобретённые мною знания помогут во время работы и обучения в выбранной мною профессии.